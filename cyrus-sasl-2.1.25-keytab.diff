diff -Naurp cyrus-sasl-2.1.25/cmulocal/sasl2.m4 cyrus-sasl-2.1.25.oden/cmulocal/sasl2.m4
--- cyrus-sasl-2.1.25/cmulocal/sasl2.m4	2011-09-02 08:58:00.000000000 -0400
+++ cyrus-sasl-2.1.25.oden/cmulocal/sasl2.m4	2011-10-14 12:24:15.509461304 -0400
@@ -268,7 +268,21 @@ if test "$gssapi" != no; then
 
   cmu_save_LIBS="$LIBS"
   LIBS="$LIBS $GSSAPIBASE_LIBS"
-  AC_CHECK_FUNCS(gsskrb5_register_acceptor_identity)
+  dnl AC_CHECK_FUNCS(gsskrb5_register_acceptor_identity)
+  AC_CHECK_HEADER(gssapi/gssapi_krb5.h, AC_DEFINE(HAVE_GSSAPI_GSSAPI_KRB5_H,,[Define if you have the gssapi/gssapi_krb5.h header file]))
+  AC_LINK_IFELSE([AC_LANG_PROGRAM([[
+#ifdef HAVE_GSSAPI_H
+#include <gssapi.h>
+#else
+#include <gssapi/gssapi.h>
+#endif
+#ifdef HAVE_GSSAPI_GSSAPI_KRB5_H
+#include <gssapi/gssapi_krb5.h>
+#endif
+]],[[gsskrb5_register_acceptor_identity("");]])
+],[AC_DEFINE(HAVE_GSSKRB5_REGISTER_ACCEPTOR_IDENTITY,,
+             [Define if your GSSAPI implimentation defines GSSKRB5_REGISTER_ACCEPTOR_IDENTITY])
+])
   AC_CHECK_FUNCS(gss_decapsulate_token)
   AC_CHECK_FUNCS(gss_encapsulate_token)
   AC_CHECK_FUNCS(gss_oid_equal)
diff -Naurp cyrus-sasl-2.1.25/plugins/gssapi.c cyrus-sasl-2.1.25.oden/plugins/gssapi.c
--- cyrus-sasl-2.1.25/plugins/gssapi.c	2011-05-11 15:25:55.000000000 -0400
+++ cyrus-sasl-2.1.25.oden/plugins/gssapi.c	2011-10-14 12:22:11.419460331 -0400
@@ -50,6 +50,9 @@
 #else
 #include <gssapi/gssapi.h>
 #endif
+#ifdef HAVE_GSSAPI_GSSAPI_KRB5_H
+#include <gssapi/gssapi_krb5.h> 
+#endif
 
 #ifdef WIN32
 #  include <winsock2.h>
